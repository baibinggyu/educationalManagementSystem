# 西山湖教务管理系统

## 1. 项目概述

### 1.1 项目背景
- 基于C语言开发的图形化教务管理系统
- 使用SDL2图形库实现界面
- 采用红黑树作为核心数据结构
- 支持管理员、教师、学生三种角色

### 1.2 开发环境
- 操作系统：Linux bai-yu 6.1.0-34-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.135-1 (2025-04-25) x86_64 GNU/Linux
- 编程语言：C11
- 图形库：SDL2
- 构建工具：CMake 3.25.1

## 2. 系统架构

### 2.1 项目结构
```
教务管理系统1.0/
├── src/           # 源代码
│   ├── main.c     # 主程序
│   ├── root.c     # 管理员模块
│   ├── student.c  # 学生模块
│   └── teacher.c  # 教师模块
├── include/       # 头文件
├── RBTree/        # 红黑树实现
├── resources/     # 资源文件
└── data/          # 数据文件
```

### 2.2 核心模块
1. 用户认证模块
2. 学生信息管理模块
3. 教师信息管理模块
4. 成绩管理模块
5. 排名统计模块

## 3. 核心功能实现

### 3.1 红黑树实现
```c
// 红黑树节点结构
typedef struct RBTree {
    void* data;           // 数据指针
    enum Color color;     // 节点颜色
    struct RBTree *left, *right, *parent;  // 子节点和父节点
}* RBTree;

// 核心操作
- 插入：O(log n)
- 删除：O(log n)
- 查找：O(log n)
- 遍历：O(n)
```

### 3.2 用户认证系统
```c
// 登录验证
bool Student_IsCountMatch(char* studentID, char* passwd) {
    struct Student temp;
    strcpy(temp.studentID, studentID);
    RBTree res = RBTree_SEARCH(&studentHead, &temp, Student_CmpCountAccountMatch);
    if(!res) return false;
    strcpy(temp.password, passwd);
    return Student_CmpCountPasswdMatch(&temp, res->data) == 0;
}
```

### 3.3 图形界面实现
```c
// 渲染循环
while(true) {
    // 1. 清屏
    SDL_SetRenderDrawColor(render, white.r, white.g, white.b, white.a);
    SDL_RenderClear(render);
    
    // 2. 渲染背景
    SDL_RenderCopy(render, tex_CheckStudentNumber, NULL, &dst_CheckStudentNumbe);
    
    // 3. 渲染文本
    SDL_Texture* tex_account = SDL_CreateTextureFromTTF(font_temp, ch_account, black, 2000);
    SDL_RenderCopy(render, tex_account, NULL, &dst_text_input);
    SDL_DestroyTexture(tex_account);
    
    // 4. 渲染按钮
    SDL_ShowButtonWithContent("确认", &dst_confirm, black);
    SDL_ShowQuitX(&dst_quit, black, black);
    
    // 5. 显示渲染结果
    SDL_RenderPresent(render);
}
```

## 4. 功能模块

### 4.1 管理员功能
1. 学生信息管理
   - 查询学生信息
   - 修改学生信息
   - 删除学生信息
   - 添加学生信息

2. 账号管理
   - 设置账号和初始密码
   - 修改密码

3. 成绩管理
   - 查询专业排名
   - 查询单科成绩排名
   - 成绩分析

### 4.2 学生功能
1. 个人信息
   - 查看个人信息
   - 修改密码

2. 成绩查询
   - 查询专业排名
   - 查询课程成绩
   - 成绩分析

3. 学业预警
   - 查看学业预警
   - 成绩提醒

## 5. 技术实现

### 5.1 数据结构
1. 红黑树
   - 自平衡特性
   - 高效的增删改查
   - 支持泛型操作

2. 学生信息结构
```c
struct Student {
    char studentID[13];      // 学号
    char name[16];          // 姓名
    char password[21];      // 密码
    char major[36];         // 专业
    struct CourseScore courseScores[3];  // 课程成绩
    float totalScore;       // 总分
};
```

### 5.2 界面实现
1. 渲染流程
   - 清屏
   - 渲染背景
   - 渲染文本
   - 渲染按钮
   - 显示结果

2. 交互处理
   - 鼠标事件
   - 键盘输入
   - 按钮状态

### 5.3 文件操作
1. 数据持久化
   - CSV文件存储
   - 数据导入导出
   - 文件读写操作

## 6. 项目特色

### 6.1 技术亮点
1. 红黑树实现
   - 自定义实现
   - 泛型支持
   - 高效操作

2. 图形界面
   - 响应式设计
   - 流畅交互
   - 直观操作

3. 模块化设计
   - 高内聚低耦合
   - 易于扩展
   - 代码复用

### 6.2 创新点
1. 红黑树泛型实现
2. 自定义事件系统
3. 模块化设计

## 7. 项目难点与解决方案

### 7.1 红黑树实现
- 难点：自平衡调整
- 解决：实现5种调整情况
- 效果：保证O(log n)性能

### 7.2 内存管理
- 难点：资源释放
- 解决：及时释放资源
- 效果：避免内存泄漏

### 7.3 界面响应
- 难点：事件处理
- 解决：事件队列
- 效果：流畅交互

## 8. 总结

### 8.1 技术收获
- 数据结构应用
- 图形界面开发
- 模块化设计

### 8.2 项目价值
- 教学管理效率提升
- 代码质量保证
- 可扩展性强

## 9. 演示要点

### 9.1 功能演示

1. 用户登录
2. 信息管理
3. 成绩查询
4. 排名统计

### 9.2 技术演示

1. 红黑树操作
2. 界面响应
3. 数据持久化
